{"openapi":"3.1.0","info":{"title":"基层治理智能体后端系统","description":"基层治理智能体后端API","version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"根路径健康检查","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/login":{"post":{"tags":["认证"],"summary":"用户登录","description":"用户通过手机号和密码登录","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["认证"],"summary":"刷新令牌","description":"使用刷新令牌获取新的访问令牌","operationId":"refresh_token_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefreshRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefreshResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["认证"],"summary":"用户登出","description":"用户登出（客户端需要清除本地令牌）","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/reset-password":{"post":{"tags":["认证"],"summary":"重置密码","description":"通过手机号重置密码","operationId":"reset_password_api_v1_auth_reset_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/profile":{"get":{"tags":["用户管理"],"summary":"获取用户资料","description":"获取当前登录用户的个人资料信息","operationId":"get_user_profile_api_v1_users_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["用户管理"],"summary":"更新用户资料","description":"更新当前登录用户的个人资料信息","operationId":"update_user_profile_api_v1_users_profile_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users/me":{"get":{"tags":["用户管理"],"summary":"获取当前用户信息","description":"获取当前登录用户的基本信息（与/profile相同）","operationId":"get_current_user_info_api_v1_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/files/upload":{"post":{"tags":["files"],"summary":"Upload File","description":"上传单个文件\n\nArgs:\n    file: 上传的文件\n    folder: 存储文件夹\n    current_user: 当前用户\n    \nReturns:\n    FileUploadResponse: 上传结果","operationId":"upload_file_api_v1_files_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_file_api_v1_files_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/files/upload-multiple":{"post":{"tags":["files"],"summary":"Upload Multiple Files","description":"批量上传文件\n\nArgs:\n    files: 上传的文件列表\n    folder: 存储文件夹\n    current_user: 当前用户\n    \nReturns:\n    MultipleFileUploadResponse: 批量上传结果","operationId":"upload_multiple_files_api_v1_files_upload_multiple_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_multiple_files_api_v1_files_upload_multiple_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleFileUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/files/presigned-url":{"post":{"tags":["files"],"summary":"Generate Presigned Url","description":"生成文件预签名URL\n\nArgs:\n    request: 预签名URL请求\n    current_user: 当前用户\n    \nReturns:\n    PresignedUrlResponse: 预签名URL响应","operationId":"generate_presigned_url_api_v1_files_presigned_url_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PresignedUrlRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PresignedUrlResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/files/upload-presigned-url":{"post":{"tags":["files"],"summary":"Generate Upload Presigned Url","description":"生成上传预签名URL\n\nArgs:\n    request: 上传预签名URL请求\n    current_user: 当前用户\n    \nReturns:\n    UploadPresignedUrlResponse: 上传预签名URL响应","operationId":"generate_upload_presigned_url_api_v1_files_upload_presigned_url_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadPresignedUrlRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadPresignedUrlResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/files/{file_key}/url":{"get":{"tags":["files"],"summary":"Get File Url","description":"生成文件访问URL\n\nArgs:\n    file_key: 文件存储键\n    expires: 过期时间（秒）\n    current_user: 当前用户\n    \nReturns:\n    PresignedUrlResponse: 文件访问URL","operationId":"get_file_url_api_v1_files__file_key__url_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_key","in":"path","required":true,"schema":{"type":"string","title":"File Key"}},{"name":"expires","in":"query","required":false,"schema":{"type":"integer","default":3600,"title":"Expires"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PresignedUrlResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files/{file_key}/info":{"get":{"tags":["files"],"summary":"Get File Info","description":"获取文件信息\n\nArgs:\n    file_key: 文件存储键\n    current_user: 当前用户\n    \nReturns:\n    FileInfoResponse: 文件信息","operationId":"get_file_info_api_v1_files__file_key__info_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_key","in":"path","required":true,"schema":{"type":"string","title":"File Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileInfoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files/list":{"get":{"tags":["files"],"summary":"List Files","description":"列出文件\n\nArgs:\n    prefix: 文件前缀\n    max_keys: 最大返回数量\n    marker: 分页标记\n    current_user: 当前用户\n    \nReturns:\n    FileListResponse: 文件列表","operationId":"list_files_api_v1_files_list_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"prefix","in":"query","required":false,"schema":{"type":"string","default":"","title":"Prefix"}},{"name":"max_keys","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Max Keys"}},{"name":"marker","in":"query","required":false,"schema":{"type":"string","default":"","title":"Marker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files/{file_key}":{"delete":{"tags":["files"],"summary":"Delete File","description":"删除单个文件\n\nArgs:\n    file_key: 文件存储键\n    current_user: 当前用户\n    \nReturns:\n    FileDeleteResponse: 删除结果","operationId":"delete_file_api_v1_files__file_key__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_key","in":"path","required":true,"schema":{"type":"string","title":"File Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileDeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/files/delete-multiple":{"post":{"tags":["files"],"summary":"Delete Multiple Files","description":"批量删除文件\n\nArgs:\n    request: 批量删除请求\n    current_user: 当前用户\n    \nReturns:\n    MultipleFileDeleteResponse: 批量删除结果","operationId":"delete_multiple_files_api_v1_files_delete_multiple_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleFileDeleteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleFileDeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/files/copy":{"post":{"tags":["files"],"summary":"Copy File","description":"复制文件\n\nArgs:\n    request: 文件复制请求\n    current_user: 当前用户\n    \nReturns:\n    FileCopyResponse: 复制结果","operationId":"copy_file_api_v1_files_copy_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileCopyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileCopyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/files/cleanup":{"post":{"tags":["files"],"summary":"Cleanup Expired Files","description":"清理过期文件（管理员功能）\n\nArgs:\n    request: 文件清理请求\n    current_user: 当前用户\n    \nReturns:\n    FileCleanupResponse: 清理结果","operationId":"cleanup_expired_files_api_v1_files_cleanup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileCleanupRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileCleanupResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/analyze-image":{"post":{"tags":["ai"],"summary":"Analyze Image","description":"分析图像内容\n\n- **image_url**: 图像URL地址\n\n返回AI分析结果，包括事件类型、描述和置信度","operationId":"analyze_image_api_v1_ai_analyze_image_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"use_cache","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Use Cache"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImageAnalysisRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AIAnalysisResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/analyze-video":{"post":{"tags":["ai"],"summary":"Analyze Video","description":"分析视频内容\n\n- **video_url**: 视频URL地址\n- **max_frames**: 最大提取帧数（可选，默认5帧）\n\n返回基于关键帧分析的结果","operationId":"analyze_video_api_v1_ai_analyze_video_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"use_cache","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Use Cache"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoAnalysisRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AIAnalysisResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/extract-frames":{"post":{"tags":["ai"],"summary":"Extract Video Frames","description":"提取视频关键帧\n\n- **video_url**: 视频URL地址\n- **max_frames**: 最大提取帧数（可选，默认5帧）\n\n返回提取的关键帧URL列表","operationId":"extract_video_frames_api_v1_ai_extract_frames_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoFrameExtractionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_VideoFrameExtractionResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/classify-event":{"post":{"tags":["ai"],"summary":"Classify Event Type","description":"基于AI分析结果分类事件类型\n\n- **analysis_result**: AI分析结果字典\n\n返回事件分类结果，包括主要类型、置信度和建议优先级","operationId":"classify_event_type_api_v1_ai_classify_event_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventClassificationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_EventClassificationResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/event-types":{"get":{"tags":["ai"],"summary":"Get Event Types","description":"获取支持的事件类型列表\n\n返回系统支持的所有事件类型及其相关信息","operationId":"get_event_types_api_v1_ai_event_types_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_EventTypesResponse_"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/service-status":{"get":{"tags":["ai"],"summary":"Get Ai Service Status","description":"获取AI服务状态\n\n返回AI服务的可用性状态和相关信息","operationId":"get_ai_service_status_api_v1_ai_service_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AIServiceStatusResponse_"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/batch-analyze":{"post":{"tags":["ai"],"summary":"Batch Analyze Media","description":"批量分析媒体文件\n\n- **media_items**: 媒体项目列表，每个项目包含url和type字段\n\n返回批量分析结果","operationId":"batch_analyze_media_api_v1_ai_batch_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_BatchAnalysisResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/analyze-async":{"post":{"tags":["ai"],"summary":"Analyze Media Async","description":"异步分析媒体内容\n\n- **media_url**: 媒体文件URL\n- **media_type**: 媒体类型（image或video）\n\n返回任务ID，可通过任务状态接口查询分析结果","operationId":"analyze_media_async_api_v1_ai_analyze_async_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsyncAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AsyncAnalysisResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/task/{task_id}":{"get":{"tags":["ai"],"summary":"Get Task Status","description":"获取异步任务状态\n\n- **task_id**: 任务ID\n\n返回任务的详细状态信息和分析结果（如果已完成）","operationId":"get_task_status_api_v1_ai_task__task_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_TaskStatusResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/cache/stats":{"get":{"tags":["ai"],"summary":"Get Cache Stats","description":"获取AI分析缓存统计信息\n\n返回缓存的使用情况和统计数据","operationId":"get_cache_stats_api_v1_ai_cache_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_CacheStatsResponse_"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/cache/clear":{"delete":{"tags":["ai"],"summary":"Clear Ai Cache","description":"清空AI分析缓存\n\n清除所有AI分析结果的缓存数据","operationId":"clear_ai_cache_api_v1_ai_cache_clear_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_Dict_str__Any__"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/service-info":{"get":{"tags":["ai"],"summary":"Get Ai Service Info","description":"获取AI服务详细信息\n\n返回AI服务的详细配置和能力信息","operationId":"get_ai_service_info_api_v1_ai_service_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AIServiceInfoResponse_"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/events":{"post":{"tags":["events","location"],"summary":"创建事件","description":"创建新事件并处理地理位置信息和媒体文件","operationId":"create_event_api_v1_events_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEventRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEventResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["events","location"],"summary":"获取事件列表","description":"返回用户事件列表，支持分页、筛选和排序","operationId":"get_events_list_api_v1_events_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"event_types","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"事件类型过滤，多个用逗号分隔","title":"Event Types"},"description":"事件类型过滤，多个用逗号分隔"},{"name":"statuses","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"状态过滤，多个用逗号分隔","title":"Statuses"},"description":"状态过滤，多个用逗号分隔"},{"name":"priorities","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"优先级过滤，多个用逗号分隔","title":"Priorities"},"description":"优先级过滤，多个用逗号分隔"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"},{"name":"search_query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"搜索关键词","title":"Search Query"},"description":"搜索关键词"},{"name":"latitude","in":"query","required":false,"schema":{"anyOf":[{"type":"number","maximum":90,"minimum":-90},{"type":"null"}],"description":"中心点纬度","title":"Latitude"},"description":"中心点纬度"},{"name":"longitude","in":"query","required":false,"schema":{"anyOf":[{"type":"number","maximum":180,"minimum":-180},{"type":"null"}],"description":"中心点经度","title":"Longitude"},"description":"中心点经度"},{"name":"radius_meters","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":50000,"minimum":1},{"type":"null"}],"description":"搜索半径（米）","title":"Radius Meters"},"description":"搜索半径（米）"},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"排序字段","default":"created_at","title":"Sort By"},"description":"排序字段"},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","description":"排序方向","default":"desc","title":"Sort Order"},"description":"排序方向"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页大小","default":20,"title":"Page Size"},"description":"每页大小"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/events/{event_id}":{"get":{"tags":["events","location"],"summary":"获取事件详情","description":"返回事件详情，包含完整事件信息和处理历史","operationId":"get_event_detail_api_v1_events__event_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["events","location"],"summary":"更新事件信息","description":"支持事件信息更新","operationId":"update_event_api_v1_events__event_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEventRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEventResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["events","location"],"summary":"删除事件","description":"处理事件删除，包含相关文件的清理","operationId":"delete_event_api_v1_events__event_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteEventResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/events/{event_id}/timeline":{"get":{"tags":["events","location"],"summary":"获取事件处理历史","description":"返回事件处理历史时间线","operationId":"get_event_timeline_api_v1_events__event_id__timeline_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventTimelineListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/events/{event_id}/status":{"put":{"tags":["events","location"],"summary":"更新事件状态","description":"更新事件状态并记录时间线","operationId":"update_event_status_api_v1_events__event_id__status_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEventStatusRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventStatusUpdateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/user/stats":{"get":{"tags":["events","location"],"summary":"Get User Stats","description":"获取当前用户的统计数据\n\n返回用户的事件统计信息，包括：\n- 总上报事件数\n- 已处理事件数\n- 贡献积分","operationId":"get_user_stats_api_v1_user_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/notifications/":{"get":{"tags":["notifications"],"summary":"Get User Notifications","description":"获取用户通知列表","operationId":"get_user_notifications_api_v1_notifications__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"channel","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/NotificationChannel"},{"type":"null"}],"description":"通知渠道过滤","title":"Channel"},"description":"通知渠道过滤"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/NotificationStatus"},{"type":"null"}],"description":"通知状态过滤","title":"Status"},"description":"通知状态过滤"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":50,"title":"Limit"},"description":"每页数量"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"偏移量","default":0,"title":"Offset"},"description":"偏移量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/{notification_id}/read":{"put":{"tags":["notifications"],"summary":"Mark Notification As Read","description":"标记通知为已读","operationId":"mark_notification_as_read_api_v1_notifications__notification_id__read_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"notification_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Notification Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/preferences":{"get":{"tags":["notifications"],"summary":"Get Notification Preferences","description":"获取用户通知偏好","operationId":"get_notification_preferences_api_v1_notifications_preferences_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/NotificationPreferenceResponse"},"type":"array","title":"Response Get Notification Preferences Api V1 Notifications Preferences Get"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["notifications"],"summary":"Update Notification Preferences","description":"批量更新用户通知偏好","operationId":"update_notification_preferences_api_v1_notifications_preferences_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationPreferenceBatchUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/notifications/preferences/summary":{"get":{"tags":["notifications"],"summary":"Get Notification Preferences Summary","description":"获取用户通知偏好摘要","operationId":"get_notification_preferences_summary_api_v1_notifications_preferences_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/notifications/preferences/initialize":{"post":{"tags":["notifications"],"summary":"Initialize Notification Preferences","description":"初始化用户默认通知偏好","operationId":"initialize_notification_preferences_api_v1_notifications_preferences_initialize_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/notifications/unread-count":{"get":{"tags":["notifications"],"summary":"Get Unread Notification Count","description":"获取未读通知数量","operationId":"get_unread_notification_count_api_v1_notifications_unread_count_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/notifications/retry-failed":{"post":{"tags":["notifications"],"summary":"Retry Failed Notifications","description":"重试失败的通知（管理员功能）","operationId":"retry_failed_notifications_api_v1_notifications_retry_failed_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/statistics/user":{"get":{"tags":["statistics","statistics"],"summary":"Get User Statistics","description":"获取用户统计数据\n\n- **user_id**: 用户ID，如果为空则统计所有用户（需要管理员权限）\n- **start_date**: 开始日期，格式：YYYY-MM-DD\n- **end_date**: 结束日期，格式：YYYY-MM-DD","operationId":"get_user_statistics_api_v1_statistics_user_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"用户ID，为空时统计所有用户","title":"User Id"},"description":"用户ID，为空时统计所有用户"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/statistics/events":{"get":{"tags":["statistics","statistics"],"summary":"Get Event Statistics","description":"获取事件统计分析数据\n\n- **start_date**: 开始日期，格式：YYYY-MM-DD\n- **end_date**: 结束日期，格式：YYYY-MM-DD\n- **group_by**: 分组方式，可选值：day（按天）、week（按周）、month（按月）","operationId":"get_event_statistics_api_v1_statistics_events_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"},{"name":"group_by","in":"query","required":false,"schema":{"type":"string","description":"分组方式：day/week/month","default":"day","title":"Group By"},"description":"分组方式：day/week/month"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/statistics/efficiency":{"get":{"tags":["statistics","statistics"],"summary":"Get Processing Efficiency Analysis","description":"获取处理效率分析数据\n\n- **start_date**: 开始日期，格式：YYYY-MM-DD\n- **end_date**: 结束日期，格式：YYYY-MM-DD","operationId":"get_processing_efficiency_analysis_api_v1_statistics_efficiency_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/statistics/hotspots":{"get":{"tags":["statistics","statistics"],"summary":"Get Hotspot Area Analysis","description":"获取热点区域分析数据\n\n- **start_date**: 开始日期，格式：YYYY-MM-DD\n- **end_date**: 结束日期，格式：YYYY-MM-DD\n- **radius_km**: 热点区域半径，单位：公里","operationId":"get_hotspot_area_analysis_api_v1_statistics_hotspots_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"},{"name":"radius_km","in":"query","required":false,"schema":{"type":"number","description":"热点区域半径（公里）","default":1.0,"title":"Radius Km"},"description":"热点区域半径（公里）"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/statistics/export/excel":{"get":{"tags":["statistics","statistics"],"summary":"Export Statistics Excel","description":"导出统计数据为Excel格式\n\n- **export_type**: 导出类型，可选值：user_stats、event_stats、efficiency、hotspots\n- **start_date**: 开始日期，格式：YYYY-MM-DD\n- **end_date**: 结束日期，格式：YYYY-MM-DD\n- **user_id**: 用户ID（仅用于用户统计导出）","operationId":"export_statistics_excel_api_v1_statistics_export_excel_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"export_type","in":"query","required":true,"schema":{"type":"string","description":"导出类型：user_stats/event_stats/efficiency/hotspots","title":"Export Type"},"description":"导出类型：user_stats/event_stats/efficiency/hotspots"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"用户ID（仅用于用户统计）","title":"User Id"},"description":"用户ID（仅用于用户统计）"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/statistics/export/csv":{"get":{"tags":["statistics","statistics"],"summary":"Export Statistics Csv","description":"导出统计数据为CSV格式\n\n- **export_type**: 导出类型，可选值：user_stats、event_stats、efficiency、hotspots\n- **start_date**: 开始日期，格式：YYYY-MM-DD\n- **end_date**: 结束日期，格式：YYYY-MM-DD\n- **user_id**: 用户ID（仅用于用户统计导出）","operationId":"export_statistics_csv_api_v1_statistics_export_csv_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"export_type","in":"query","required":true,"schema":{"type":"string","description":"导出类型：user_stats/event_stats/efficiency/hotspots","title":"Export Type"},"description":"导出类型：user_stats/event_stats/efficiency/hotspots"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始日期","title":"Start Date"},"description":"开始日期"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束日期","title":"End Date"},"description":"结束日期"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"用户ID（仅用于用户统计）","title":"User Id"},"description":"用户ID（仅用于用户统计）"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/statistics/cache/refresh":{"post":{"tags":["statistics","statistics"],"summary":"Refresh Statistics Cache","description":"刷新统计数据缓存\n\n清除所有统计缓存并预热常用数据","operationId":"refresh_statistics_cache_api_v1_statistics_cache_refresh_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/tasks/status":{"get":{"tags":["admin","admin"],"summary":"Get Task Status","description":"获取所有定时任务状态","operationId":"get_task_status_api_v1_admin_tasks_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/tasks/{task_name}/run":{"post":{"tags":["admin","admin"],"summary":"Run Task Now","description":"立即执行指定任务\n\n- **task_name**: 任务名称","operationId":"run_task_now_api_v1_admin_tasks__task_name__run_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_name","in":"path","required":true,"schema":{"type":"string","title":"Task Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/tasks/{task_name}/enable":{"post":{"tags":["admin","admin"],"summary":"Enable Task","description":"启用指定任务\n\n- **task_name**: 任务名称","operationId":"enable_task_api_v1_admin_tasks__task_name__enable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_name","in":"path","required":true,"schema":{"type":"string","title":"Task Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/tasks/{task_name}/disable":{"post":{"tags":["admin","admin"],"summary":"Disable Task","description":"禁用指定任务\n\n- **task_name**: 任务名称","operationId":"disable_task_api_v1_admin_tasks__task_name__disable_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_name","in":"path","required":true,"schema":{"type":"string","title":"Task Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/cache/statistics/refresh":{"post":{"tags":["admin","admin"],"summary":"Refresh Statistics Cache","description":"手动刷新统计数据缓存","operationId":"refresh_statistics_cache_api_v1_admin_cache_statistics_refresh_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/system/health":{"get":{"tags":["admin","admin"],"summary":"Get System Health","description":"获取系统健康状态","operationId":"get_system_health_api_v1_admin_system_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/statistics/summary":{"get":{"tags":["admin","admin"],"summary":"Get Statistics Summary","description":"获取统计数据概览","operationId":"get_statistics_summary_api_v1_admin_statistics_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/scheduler/start":{"post":{"tags":["admin","admin"],"summary":"Start Scheduler","description":"启动任务调度器","operationId":"start_scheduler_api_v1_admin_scheduler_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/scheduler/stop":{"post":{"tags":["admin","admin"],"summary":"Stop Scheduler","description":"停止任务调度器","operationId":"stop_scheduler_api_v1_admin_scheduler_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseModel"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/monitoring/health":{"get":{"tags":["monitoring"],"summary":"Health Check","description":"系统健康检查端点\n返回系统各组件的健康状态和基本指标","operationId":"health_check_api_v1_monitoring_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}}}}}},"/api/v1/monitoring/health/simple":{"get":{"tags":["monitoring"],"summary":"Simple Health Check","description":"简单健康检查端点\n快速返回服务状态，用于负载均衡器检查","operationId":"simple_health_check_api_v1_monitoring_health_simple_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/metrics/system":{"get":{"tags":["monitoring"],"summary":"Get System Metrics","description":"获取系统指标数据\n需要管理员权限","operationId":"get_system_metrics_api_v1_monitoring_metrics_system_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"minutes","in":"query","required":false,"schema":{"type":"integer","maximum":60,"minimum":1,"description":"获取最近N分钟的指标数据","default":10,"title":"Minutes"},"description":"获取最近N分钟的指标数据"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemMetricsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/metrics/endpoints":{"get":{"tags":["monitoring"],"summary":"Get Endpoint Statistics","description":"获取API端点性能统计\n需要管理员权限","operationId":"get_endpoint_statistics_api_v1_monitoring_metrics_endpoints_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/EndpointStatsResponse"},"type":"array","title":"Response Get Endpoint Statistics Api V1 Monitoring Metrics Endpoints Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/monitoring/alerts":{"get":{"tags":["monitoring"],"summary":"Get Alerts","description":"获取系统告警信息\n需要管理员权限","operationId":"get_alerts_api_v1_monitoring_alerts_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"minutes","in":"query","required":false,"schema":{"type":"integer","maximum":1440,"minimum":1,"description":"获取最近N分钟的告警","default":60,"title":"Minutes"},"description":"获取最近N分钟的告警"},{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"告警级别过滤","title":"Level"},"description":"告警级别过滤"},{"name":"alert_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"告警类型过滤","title":"Alert Type"},"description":"告警类型过滤"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/metrics/collect":{"post":{"tags":["monitoring"],"summary":"Trigger Metrics Collection","description":"手动触发指标收集\n需要管理员权限","operationId":"trigger_metrics_collection_api_v1_monitoring_metrics_collect_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/monitoring/status/database":{"get":{"tags":["monitoring"],"summary":"Check Database Status","description":"检查数据库连接状态","operationId":"check_database_status_api_v1_monitoring_status_database_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/status/redis":{"get":{"tags":["monitoring"],"summary":"Check Redis Status","description":"检查Redis连接状态","operationId":"check_redis_status_api_v1_monitoring_status_redis_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/status/external-services":{"get":{"tags":["monitoring"],"summary":"Check External Services Status","description":"检查外部服务状态","operationId":"check_external_services_status_api_v1_monitoring_status_external_services_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/logs/search":{"get":{"tags":["monitoring"],"summary":"Search Logs","description":"搜索和过滤日志\n需要管理员权限","operationId":"search_logs_api_v1_monitoring_logs_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","description":"搜索关键词","title":"Query"},"description":"搜索关键词"},{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"日志级别","title":"Level"},"description":"日志级别"},{"name":"logger_name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"记录器名称","title":"Logger Name"},"description":"记录器名称"},{"name":"start_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始时间","title":"Start Time"},"description":"开始时间"},{"name":"end_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束时间","title":"End Time"},"description":"结束时间"},{"name":"request_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"请求ID","title":"Request Id"},"description":"请求ID"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"返回条数限制","default":100,"title":"Limit"},"description":"返回条数限制"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"偏移量","default":0,"title":"Offset"},"description":"偏移量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/logs/statistics":{"get":{"tags":["monitoring"],"summary":"Get Log Statistics","description":"获取日志统计信息\n需要管理员权限","operationId":"get_log_statistics_api_v1_monitoring_logs_statistics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":168,"minimum":1,"description":"统计时间范围（小时）","default":24,"title":"Hours"},"description":"统计时间范围（小时）"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/monitoring/logs/export":{"post":{"tags":["monitoring"],"summary":"Export Logs","description":"导出日志数据\n需要管理员权限","operationId":"export_logs_api_v1_monitoring_logs_export_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"搜索关键词","title":"Query"},"description":"搜索关键词"},{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"日志级别","title":"Level"},"description":"日志级别"},{"name":"start_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"开始时间","title":"Start Time"},"description":"开始时间"},{"name":"end_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"结束时间","title":"End Time"},"description":"结束时间"},{"name":"format_type","in":"query","required":false,"schema":{"type":"string","description":"导出格式 (json/csv)","default":"json","title":"Format Type"},"description":"导出格式 (json/csv)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50000,"minimum":1,"description":"导出条数限制","default":10000,"title":"Limit"},"description":"导出条数限制"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dashboard/dashboard":{"get":{"tags":["dashboard"],"summary":"Get Dashboard Data","description":"获取仪表板数据\n包含系统概览、API性能、错误统计等信息","operationId":"get_dashboard_data_api_v1_dashboard_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardData"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/dashboard/dashboard/realtime-metrics":{"get":{"tags":["dashboard"],"summary":"Get Realtime Metrics","description":"获取实时指标数据\n用于仪表板实时更新","operationId":"get_realtime_metrics_api_v1_dashboard_dashboard_realtime_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/dashboard/dashboard/performance-trends":{"get":{"tags":["dashboard"],"summary":"Get Performance Trends","description":"获取性能趋势数据\n用于绘制性能趋势图表","operationId":"get_performance_trends_api_v1_dashboard_dashboard_performance_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":168,"minimum":1,"description":"时间范围（小时）","default":24,"title":"Hours"},"description":"时间范围（小时）"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"简单健康检查端点","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AIAnalysisResponse":{"properties":{"event_type":{"type":"string","title":"Event Type","description":"事件类型"},"description":{"type":"string","title":"Description","description":"事件描述"},"confidence":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence","description":"置信度"},"details":{"additionalProperties":true,"type":"object","title":"Details","description":"详细信息"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"分析时间"}},"type":"object","required":["event_type","description","confidence","details","timestamp"],"title":"AIAnalysisResponse","description":"AI分析响应模型"},"AIModelInfo":{"properties":{"model_name":{"type":"string","title":"Model Name","description":"模型名称"},"model_version":{"type":"string","title":"Model Version","description":"模型版本"},"capabilities":{"items":{"type":"string"},"type":"array","title":"Capabilities","description":"模型能力"},"supported_formats":{"items":{"type":"string"},"type":"array","title":"Supported Formats","description":"支持的格式"},"max_file_size":{"type":"integer","title":"Max File Size","description":"最大文件大小（字节）"}},"type":"object","required":["model_name","model_version","capabilities","supported_formats","max_file_size"],"title":"AIModelInfo","description":"AI模型信息模型"},"AIServiceInfoResponse":{"properties":{"service_name":{"type":"string","title":"Service Name","description":"服务名称"},"service_version":{"type":"string","title":"Service Version","description":"服务版本"},"provider":{"type":"string","title":"Provider","description":"服务提供商"},"models":{"items":{"$ref":"#/components/schemas/AIModelInfo"},"type":"array","title":"Models","description":"可用模型列表"},"rate_limits":{"additionalProperties":{"type":"integer"},"type":"object","title":"Rate Limits","description":"速率限制"},"status":{"$ref":"#/components/schemas/AIServiceStatusResponse","description":"服务状态"}},"type":"object","required":["service_name","service_version","provider","models","rate_limits","status"],"title":"AIServiceInfoResponse","description":"AI服务信息响应模型"},"AIServiceStatusResponse":{"properties":{"service_available":{"type":"boolean","title":"Service Available","description":"服务是否可用"},"fallback_enabled":{"type":"boolean","title":"Fallback Enabled","description":"是否启用降级模式"},"last_check_time":{"type":"string","format":"date-time","title":"Last Check Time","description":"最后检查时间"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"错误信息"}},"type":"object","required":["service_available","fallback_enabled","last_check_time"],"title":"AIServiceStatusResponse","description":"AI服务状态响应模型"},"APIResponse_AIAnalysisResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/AIAnalysisResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[AIAnalysisResponse]"},"APIResponse_AIServiceInfoResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/AIServiceInfoResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[AIServiceInfoResponse]"},"APIResponse_AIServiceStatusResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/AIServiceStatusResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[AIServiceStatusResponse]"},"APIResponse_AsyncAnalysisResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/AsyncAnalysisResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[AsyncAnalysisResponse]"},"APIResponse_BatchAnalysisResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/BatchAnalysisResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[BatchAnalysisResponse]"},"APIResponse_CacheStatsResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/CacheStatsResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[CacheStatsResponse]"},"APIResponse_Dict_str__Any__":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[Dict[str, Any]]"},"APIResponse_EventClassificationResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/EventClassificationResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[EventClassificationResponse]"},"APIResponse_EventTypesResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/EventTypesResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[EventTypesResponse]"},"APIResponse_TaskStatusResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/TaskStatusResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[TaskStatusResponse]"},"APIResponse_VideoFrameExtractionResponse_":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{"$ref":"#/components/schemas/VideoFrameExtractionResponse"},{"type":"null"}]},"message":{"type":"string","title":"Message"},"code":{"type":"integer","title":"Code"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","message","code","timestamp"],"title":"APIResponse[VideoFrameExtractionResponse]"},"AlertResponse":{"properties":{"alerts":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Alerts"},"total_count":{"type":"integer","title":"Total Count"},"time_range":{"additionalProperties":{"type":"string"},"type":"object","title":"Time Range"}},"type":"object","required":["alerts","total_count","time_range"],"title":"AlertResponse","description":"告警响应模型"},"AsyncAnalysisRequest":{"properties":{"media_url":{"type":"string","title":"Media Url","description":"媒体文件URL"},"media_type":{"type":"string","pattern":"^(image|video)$","title":"Media Type","description":"媒体类型"}},"type":"object","required":["media_url","media_type"],"title":"AsyncAnalysisRequest","description":"异步分析请求模型"},"AsyncAnalysisResponse":{"properties":{"task_id":{"type":"string","title":"Task Id","description":"任务ID"},"status":{"type":"string","title":"Status","description":"任务状态"},"message":{"type":"string","title":"Message","description":"状态描述"}},"type":"object","required":["task_id","status","message"],"title":"AsyncAnalysisResponse","description":"异步分析响应模型"},"BatchAnalysisRequest":{"properties":{"media_items":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Media Items","description":"媒体项目列表"}},"type":"object","required":["media_items"],"title":"BatchAnalysisRequest","description":"批量分析请求模型"},"BatchAnalysisResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/AIAnalysisResponse"},"type":"array","title":"Results","description":"分析结果列表"},"success_count":{"type":"integer","title":"Success Count","description":"成功数量"},"failed_count":{"type":"integer","title":"Failed Count","description":"失败数量"},"failed_items":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Failed Items","description":"失败项目列表"}},"type":"object","required":["results","success_count","failed_count","failed_items"],"title":"BatchAnalysisResponse","description":"批量分析响应模型"},"Body_upload_file_api_v1_files_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"folder":{"type":"string","title":"Folder","default":"uploads"}},"type":"object","required":["file"],"title":"Body_upload_file_api_v1_files_upload_post"},"Body_upload_multiple_files_api_v1_files_upload_multiple_post":{"properties":{"files":{"items":{"type":"string","format":"binary"},"type":"array","title":"Files"},"folder":{"type":"string","title":"Folder","default":"uploads"}},"type":"object","required":["files"],"title":"Body_upload_multiple_files_api_v1_files_upload_multiple_post"},"CacheStatsResponse":{"properties":{"cache_enabled":{"type":"boolean","title":"Cache Enabled","description":"缓存是否启用"},"cache_ttl":{"type":"integer","title":"Cache Ttl","description":"缓存TTL（秒）"},"total_keys":{"type":"integer","title":"Total Keys","description":"总缓存键数"},"hit_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Hit Rate","description":"缓存命中率"},"memory_usage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Memory Usage","description":"内存使用情况"}},"type":"object","required":["cache_enabled","cache_ttl","total_keys"],"title":"CacheStatsResponse","description":"缓存统计响应模型"},"CreateEventRequest":{"properties":{"event_type":{"type":"string","maxLength":100,"minLength":1,"title":"Event Type","description":"事件类型"},"title":{"type":"string","maxLength":200,"minLength":1,"title":"Title","description":"事件标题"},"description":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Description","description":"事件描述"},"latitude":{"type":"number","maximum":90.0,"minimum":-90.0,"title":"Latitude","description":"纬度"},"longitude":{"type":"number","maximum":180.0,"minimum":-180.0,"title":"Longitude","description":"经度"},"address":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Address","description":"详细地址"},"media_files":{"anyOf":[{"items":{"$ref":"#/components/schemas/MediaFileInfo"},"type":"array"},{"type":"null"}],"title":"Media Files","description":"媒体文件列表"},"ai_analysis":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Ai Analysis","description":"AI分析结果"},"confidence":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Confidence","description":"AI识别置信度"}},"type":"object","required":["event_type","title","latitude","longitude"],"title":"CreateEventRequest","description":"创建事件请求模型"},"CreateEventResponse":{"properties":{"event_id":{"type":"string","title":"Event Id","description":"事件ID"},"event":{"$ref":"#/components/schemas/EventResponse","description":"事件信息"},"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Address","description":"解析的地址"},"location_confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Location Confidence","description":"地址置信度"},"priority":{"type":"string","title":"Priority","description":"自动调整的优先级"},"media_count":{"type":"integer","title":"Media Count","description":"媒体文件数量"},"message":{"type":"string","title":"Message","description":"创建结果消息"}},"type":"object","required":["event_id","event","priority","media_count","message"],"title":"CreateEventResponse","description":"创建事件响应模型"},"DashboardData":{"properties":{"system_overview":{"additionalProperties":true,"type":"object","title":"System Overview"},"api_performance":{"additionalProperties":true,"type":"object","title":"Api Performance"},"error_statistics":{"additionalProperties":true,"type":"object","title":"Error Statistics"},"health_status":{"additionalProperties":true,"type":"object","title":"Health Status"},"recent_alerts":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Recent Alerts"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["system_overview","api_performance","error_statistics","health_status","recent_alerts","timestamp"],"title":"DashboardData","description":"仪表板数据模型"},"DeleteEventResponse":{"properties":{"event_id":{"type":"string","title":"Event Id","description":"事件ID"},"deleted_files_count":{"type":"integer","title":"Deleted Files Count","description":"删除的文件数量"},"failed_files_count":{"type":"integer","title":"Failed Files Count","description":"删除失败的文件数量"},"message":{"type":"string","title":"Message","description":"删除结果消息"}},"type":"object","required":["event_id","deleted_files_count","failed_files_count","message"],"title":"DeleteEventResponse","description":"删除事件响应模型"},"EndpointStatsResponse":{"properties":{"endpoint":{"type":"string","title":"Endpoint"},"method":{"type":"string","title":"Method"},"request_count":{"type":"integer","title":"Request Count"},"avg_response_time":{"type":"number","title":"Avg Response Time"},"min_response_time":{"type":"number","title":"Min Response Time"},"max_response_time":{"type":"number","title":"Max Response Time"},"p95_response_time":{"type":"number","title":"P95 Response Time"}},"type":"object","required":["endpoint","method","request_count","avg_response_time","min_response_time","max_response_time","p95_response_time"],"title":"EndpointStatsResponse","description":"端点统计响应模型"},"EventClassificationRequest":{"properties":{"analysis_result":{"additionalProperties":true,"type":"object","title":"Analysis Result","description":"AI分析结果"}},"type":"object","required":["analysis_result"],"title":"EventClassificationRequest","description":"事件分类请求模型"},"EventClassificationResponse":{"properties":{"primary_type":{"type":"string","title":"Primary Type","description":"主要事件类型"},"secondary_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Secondary Type","description":"次要事件类型"},"confidence":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence","description":"分类置信度"},"suggested_priority":{"type":"string","title":"Suggested Priority","description":"建议优先级"},"keywords":{"items":{"type":"string"},"type":"array","title":"Keywords","description":"关键词列表"}},"type":"object","required":["primary_type","confidence","suggested_priority","keywords"],"title":"EventClassificationResponse","description":"事件分类响应模型"},"EventDetailResponse":{"properties":{"id":{"type":"string","title":"Id","description":"事件ID"},"user_id":{"type":"string","title":"User Id","description":"用户ID"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name","description":"用户姓名"},"event_type":{"type":"string","title":"Event Type","description":"事件类型"},"title":{"type":"string","title":"Title","description":"事件标题"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"事件描述"},"location_lat":{"type":"number","title":"Location Lat","description":"纬度"},"location_lng":{"type":"number","title":"Location Lng","description":"经度"},"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Address","description":"详细地址"},"priority":{"type":"string","title":"Priority","description":"优先级"},"status":{"type":"string","title":"Status","description":"状态"},"confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence","description":"AI识别置信度"},"ai_analysis":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Ai Analysis","description":"AI分析结果"},"created_at":{"type":"string","title":"Created At","description":"创建时间"},"updated_at":{"type":"string","title":"Updated At","description":"更新时间"},"media_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Media Count","description":"媒体文件数量"},"distance_meters":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Distance Meters","description":"距离（米）"},"user_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Phone","description":"用户手机号"},"timelines":{"items":{"$ref":"#/components/schemas/EventTimelineResponse"},"type":"array","title":"Timelines","description":"时间线列表"},"media_files":{"items":{"$ref":"#/components/schemas/EventMediaResponse"},"type":"array","title":"Media Files","description":"媒体文件列表"},"location_details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Location Details","description":"详细地理位置信息"},"status_history":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Status History","description":"状态历史摘要"}},"type":"object","required":["id","user_id","event_type","title","location_lat","location_lng","priority","status","created_at","updated_at","timelines","media_files"],"title":"EventDetailResponse","description":"事件详情响应模型"},"EventListResponse":{"properties":{"events":{"items":{"$ref":"#/components/schemas/EventResponse"},"type":"array","title":"Events","description":"事件列表"},"pagination":{"additionalProperties":true,"type":"object","title":"Pagination","description":"分页信息"},"filters":{"additionalProperties":true,"type":"object","title":"Filters","description":"过滤条件"}},"type":"object","required":["events","pagination","filters"],"title":"EventListResponse","description":"事件列表响应模型"},"EventMediaResponse":{"properties":{"id":{"type":"string","title":"Id","description":"媒体ID"},"event_id":{"type":"string","title":"Event Id","description":"事件ID"},"media_type":{"type":"string","title":"Media Type","description":"媒体类型"},"file_url":{"type":"string","title":"File Url","description":"文件URL"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url","description":"缩略图URL"},"file_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"File Size","description":"文件大小"},"file_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Name","description":"文件名"},"file_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"File Metadata","description":"文件元数据"},"created_at":{"type":"string","title":"Created At","description":"创建时间"}},"type":"object","required":["id","event_id","media_type","file_url","created_at"],"title":"EventMediaResponse","description":"事件媒体响应模型"},"EventPriority":{"type":"string","enum":["low","medium","high","urgent"],"title":"EventPriority","description":"事件优先级枚举"},"EventResponse":{"properties":{"id":{"type":"string","title":"Id","description":"事件ID"},"user_id":{"type":"string","title":"User Id","description":"用户ID"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name","description":"用户姓名"},"event_type":{"type":"string","title":"Event Type","description":"事件类型"},"title":{"type":"string","title":"Title","description":"事件标题"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"事件描述"},"location_lat":{"type":"number","title":"Location Lat","description":"纬度"},"location_lng":{"type":"number","title":"Location Lng","description":"经度"},"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Address","description":"详细地址"},"priority":{"type":"string","title":"Priority","description":"优先级"},"status":{"type":"string","title":"Status","description":"状态"},"confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence","description":"AI识别置信度"},"ai_analysis":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Ai Analysis","description":"AI分析结果"},"created_at":{"type":"string","title":"Created At","description":"创建时间"},"updated_at":{"type":"string","title":"Updated At","description":"更新时间"},"media_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Media Count","description":"媒体文件数量"},"distance_meters":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Distance Meters","description":"距离（米）"}},"type":"object","required":["id","user_id","event_type","title","location_lat","location_lng","priority","status","created_at","updated_at"],"title":"EventResponse","description":"事件响应模型"},"EventStatus":{"type":"string","enum":["pending","processing","completed","rejected","cancelled"],"title":"EventStatus","description":"事件状态枚举"},"EventStatusUpdateResponse":{"properties":{"event_id":{"type":"string","title":"Event Id","description":"事件ID"},"old_status":{"type":"string","title":"Old Status","description":"原状态"},"new_status":{"type":"string","title":"New Status","description":"新状态"},"timeline_id":{"type":"string","title":"Timeline Id","description":"时间线记录ID"},"message":{"type":"string","title":"Message","description":"更新结果消息"}},"type":"object","required":["event_id","old_status","new_status","timeline_id","message"],"title":"EventStatusUpdateResponse","description":"事件状态更新响应模型"},"EventTimelineListResponse":{"properties":{"event_id":{"type":"string","title":"Event Id","description":"事件ID"},"timelines":{"items":{"$ref":"#/components/schemas/EventTimelineResponse"},"type":"array","title":"Timelines","description":"时间线列表"},"total_count":{"type":"integer","title":"Total Count","description":"总记录数"}},"type":"object","required":["event_id","timelines","total_count"],"title":"EventTimelineListResponse","description":"事件时间线列表响应模型"},"EventTimelineResponse":{"properties":{"id":{"type":"string","title":"Id","description":"时间线ID"},"event_id":{"type":"string","title":"Event Id","description":"事件ID"},"operator_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Operator Id","description":"操作者ID"},"operator_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Operator Name","description":"操作者姓名"},"status":{"type":"string","title":"Status","description":"状态"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"描述"},"created_at":{"type":"string","title":"Created At","description":"创建时间"}},"type":"object","required":["id","event_id","status","created_at"],"title":"EventTimelineResponse","description":"事件时间线响应模型"},"EventTypeInfo":{"properties":{"type_name":{"type":"string","title":"Type Name","description":"类型名称"},"keywords":{"items":{"type":"string"},"type":"array","title":"Keywords","description":"关键词"},"priority":{"type":"string","title":"Priority","description":"默认优先级"},"category":{"type":"string","title":"Category","description":"类别"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"类型描述"}},"type":"object","required":["type_name","keywords","priority","category"],"title":"EventTypeInfo","description":"事件类型信息模型"},"EventTypesResponse":{"properties":{"event_types":{"items":{"$ref":"#/components/schemas/EventTypeInfo"},"type":"array","title":"Event Types","description":"事件类型列表"},"total_count":{"type":"integer","title":"Total Count","description":"总数量"}},"type":"object","required":["event_types","total_count"],"title":"EventTypesResponse","description":"事件类型列表响应模型"},"FileCleanupRequest":{"properties":{"days":{"type":"integer","maximum":365.0,"minimum":1.0,"title":"Days","description":"保留天数","default":30}},"type":"object","title":"FileCleanupRequest","description":"文件清理请求模型"},"FileCleanupResponse":{"properties":{"total_files":{"type":"integer","title":"Total Files","description":"总文件数"},"deleted_files":{"type":"integer","title":"Deleted Files","description":"删除文件数"},"cutoff_days":{"type":"integer","title":"Cutoff Days","description":"保留天数"},"message":{"type":"string","title":"Message","description":"清理结果消息"}},"type":"object","required":["total_files","deleted_files","cutoff_days","message"],"title":"FileCleanupResponse","description":"文件清理响应模型"},"FileCopyRequest":{"properties":{"source_key":{"type":"string","title":"Source Key","description":"源文件键"},"dest_key":{"type":"string","title":"Dest Key","description":"目标文件键"}},"type":"object","required":["source_key","dest_key"],"title":"FileCopyRequest","description":"文件复制请求模型"},"FileCopyResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"是否复制成功"},"source_key":{"type":"string","title":"Source Key","description":"源文件键"},"dest_key":{"type":"string","title":"Dest Key","description":"目标文件键"},"message":{"type":"string","title":"Message","description":"复制结果消息"}},"type":"object","required":["success","source_key","dest_key","message"],"title":"FileCopyResponse","description":"文件复制响应模型"},"FileDeleteResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"是否删除成功"},"file_key":{"type":"string","title":"File Key","description":"文件存储键"},"message":{"type":"string","title":"Message","description":"删除结果消息"}},"type":"object","required":["success","file_key","message"],"title":"FileDeleteResponse","description":"文件删除响应模型"},"FileInfoResponse":{"properties":{"file_key":{"type":"string","title":"File Key","description":"文件存储键"},"file_size":{"type":"integer","title":"File Size","description":"文件大小（字节）"},"content_type":{"type":"string","title":"Content Type","description":"文件MIME类型"},"etag":{"type":"string","title":"Etag","description":"文件ETag"},"last_modified":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Modified","description":"最后修改时间"},"file_url":{"type":"string","title":"File Url","description":"文件访问URL"},"custom_metadata":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Custom Metadata","description":"自定义元数据"}},"type":"object","required":["file_key","file_size","content_type","etag","file_url"],"title":"FileInfoResponse","description":"文件信息响应模型"},"FileListResponse":{"properties":{"files":{"items":{"$ref":"#/components/schemas/FileInfoResponse"},"type":"array","title":"Files","description":"文件列表"},"next_marker":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Marker","description":"下一页标记"},"is_truncated":{"type":"boolean","title":"Is Truncated","description":"是否还有更多文件"},"prefix":{"type":"string","title":"Prefix","description":"查询前缀"}},"type":"object","required":["files","is_truncated","prefix"],"title":"FileListResponse","description":"文件列表响应模型"},"FileUploadResponse":{"properties":{"file_key":{"type":"string","title":"File Key","description":"文件存储键"},"file_url":{"type":"string","title":"File Url","description":"文件访问URL"},"file_name":{"type":"string","title":"File Name","description":"原始文件名"},"file_size":{"type":"integer","title":"File Size","description":"文件大小（字节）"},"content_type":{"type":"string","title":"Content Type","description":"文件MIME类型"},"etag":{"type":"string","title":"Etag","description":"文件ETag"},"upload_time":{"type":"string","title":"Upload Time","description":"上传时间"}},"type":"object","required":["file_key","file_url","file_name","file_size","content_type","etag","upload_time"],"title":"FileUploadResponse","description":"文件上传响应模型"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthCheckResponse":{"properties":{"overall_status":{"type":"string","title":"Overall Status"},"check_duration":{"type":"number","title":"Check Duration"},"timestamp":{"type":"string","title":"Timestamp"},"services":{"additionalProperties":true,"type":"object","title":"Services"},"system_metrics":{"additionalProperties":true,"type":"object","title":"System Metrics"}},"type":"object","required":["overall_status","check_duration","timestamp","services","system_metrics"],"title":"HealthCheckResponse","description":"健康检查响应模型"},"ImageAnalysisRequest":{"properties":{"image_url":{"type":"string","title":"Image Url","description":"图像URL"}},"type":"object","required":["image_url"],"title":"ImageAnalysisRequest","description":"图像分析请求模型"},"MediaFileInfo":{"properties":{"media_type":{"$ref":"#/components/schemas/MediaType","description":"媒体类型"},"file_url":{"type":"string","title":"File Url","description":"文件URL"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url","description":"缩略图URL"},"file_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"File Size","description":"文件大小（字节）"},"file_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Name","description":"原始文件名"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"文件元数据"}},"type":"object","required":["media_type","file_url"],"title":"MediaFileInfo","description":"媒体文件信息模型"},"MediaType":{"type":"string","enum":["image","video","audio"],"title":"MediaType","description":"媒体类型枚举"},"MessageResponse":{"properties":{"message":{"type":"string","title":"Message","description":"响应消息"},"success":{"type":"boolean","title":"Success","description":"是否成功","default":true}},"type":"object","required":["message"],"title":"MessageResponse","description":"消息响应模式"},"MultipleFileDeleteRequest":{"properties":{"file_keys":{"items":{"type":"string"},"type":"array","maxItems":1000,"minItems":1,"title":"File Keys","description":"文件存储键列表"}},"type":"object","required":["file_keys"],"title":"MultipleFileDeleteRequest","description":"批量文件删除请求模型"},"MultipleFileDeleteResponse":{"properties":{"success_files":{"items":{"type":"string"},"type":"array","title":"Success Files","description":"删除成功的文件列表"},"failed_files":{"items":{"type":"string"},"type":"array","title":"Failed Files","description":"删除失败的文件列表"},"total_count":{"type":"integer","title":"Total Count","description":"总文件数"},"success_count":{"type":"integer","title":"Success Count","description":"成功删除数"},"failed_count":{"type":"integer","title":"Failed Count","description":"失败删除数"}},"type":"object","required":["success_files","failed_files","total_count","success_count","failed_count"],"title":"MultipleFileDeleteResponse","description":"批量文件删除响应模型"},"MultipleFileUploadResponse":{"properties":{"success_files":{"items":{"$ref":"#/components/schemas/FileUploadResponse"},"type":"array","title":"Success Files","description":"上传成功的文件列表"},"failed_files":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"Failed Files","description":"上传失败的文件列表","default":[]},"total_count":{"type":"integer","title":"Total Count","description":"总文件数"},"success_count":{"type":"integer","title":"Success Count","description":"成功上传数"},"failed_count":{"type":"integer","title":"Failed Count","description":"失败上传数"}},"type":"object","required":["success_files","total_count","success_count","failed_count"],"title":"MultipleFileUploadResponse","description":"批量文件上传响应模型"},"NotificationChannel":{"type":"string","enum":["push","sms","email","in_app"],"title":"NotificationChannel","description":"通知渠道枚举"},"NotificationListResponse":{"properties":{"notifications":{"items":{"$ref":"#/components/schemas/NotificationResponse"},"type":"array","title":"Notifications"},"total_count":{"type":"integer","title":"Total Count"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"}},"type":"object","required":["notifications","total_count","limit","offset"],"title":"NotificationListResponse","description":"通知列表响应模型"},"NotificationPreferenceBatchUpdate":{"properties":{"preferences":{"items":{"$ref":"#/components/schemas/NotificationPreferenceUpdate"},"type":"array","title":"Preferences"}},"type":"object","required":["preferences"],"title":"NotificationPreferenceBatchUpdate","description":"批量更新通知偏好请求模型"},"NotificationPreferenceResponse":{"properties":{"notification_type":{"$ref":"#/components/schemas/NotificationType"},"channel":{"$ref":"#/components/schemas/NotificationChannel"},"enabled":{"type":"boolean","title":"Enabled","default":true},"quiet_hours_start":{"anyOf":[{"type":"string","pattern":"^([01]?[0-9]|2[0-3]):[0-5][0-9]$"},{"type":"null"}],"title":"Quiet Hours Start"},"quiet_hours_end":{"anyOf":[{"type":"string","pattern":"^([01]?[0-9]|2[0-3]):[0-5][0-9]$"},{"type":"null"}],"title":"Quiet Hours End"},"frequency_limit":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Frequency Limit"},"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["notification_type","channel","id","user_id","created_at","updated_at"],"title":"NotificationPreferenceResponse","description":"通知偏好响应模型"},"NotificationPreferenceUpdate":{"properties":{"notification_type":{"$ref":"#/components/schemas/NotificationType"},"channel":{"$ref":"#/components/schemas/NotificationChannel"},"enabled":{"type":"boolean","title":"Enabled","default":true},"quiet_hours_start":{"anyOf":[{"type":"string","pattern":"^([01]?[0-9]|2[0-3]):[0-5][0-9]$"},{"type":"null"}],"title":"Quiet Hours Start"},"quiet_hours_end":{"anyOf":[{"type":"string","pattern":"^([01]?[0-9]|2[0-3]):[0-5][0-9]$"},{"type":"null"}],"title":"Quiet Hours End"},"frequency_limit":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Frequency Limit"}},"type":"object","required":["notification_type","channel"],"title":"NotificationPreferenceUpdate","description":"更新通知偏好请求模型"},"NotificationPriority":{"type":"string","enum":["low","normal","high","urgent"],"title":"NotificationPriority","description":"通知优先级枚举"},"NotificationResponse":{"properties":{"notification_type":{"$ref":"#/components/schemas/NotificationType"},"channel":{"$ref":"#/components/schemas/NotificationChannel"},"priority":{"$ref":"#/components/schemas/NotificationPriority","default":"normal"},"title":{"type":"string","maxLength":200,"title":"Title"},"content":{"type":"string","title":"Content"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"},"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"event_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Event Id"},"recipient":{"type":"string","title":"Recipient"},"status":{"$ref":"#/components/schemas/NotificationStatus"},"sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sent At"},"delivered_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Delivered At"},"read_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Read At"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"retry_count":{"type":"integer","title":"Retry Count","default":0},"max_retries":{"type":"integer","title":"Max Retries","default":3},"next_retry_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Next Retry At"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"},"external_response":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"External Response"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["notification_type","channel","title","content","id","user_id","recipient","status","created_at","updated_at"],"title":"NotificationResponse","description":"通知响应模型"},"NotificationStatus":{"type":"string","enum":["pending","sent","delivered","read","failed"],"title":"NotificationStatus","description":"通知状态枚举"},"NotificationType":{"type":"string","enum":["event_status_change","event_assigned","event_reminder","system_announcement","maintenance_notice"],"title":"NotificationType","description":"通知类型枚举"},"PasswordResetRequest":{"properties":{"phone":{"type":"string","title":"Phone","description":"手机号","example":"13800138000"},"new_password":{"type":"string","maxLength":20,"minLength":6,"title":"New Password","description":"新密码","example":"newpassword123"}},"type":"object","required":["phone","new_password"],"title":"PasswordResetRequest","description":"密码重置请求模式"},"PresignedUrlRequest":{"properties":{"file_key":{"type":"string","title":"File Key","description":"文件存储键"},"expires":{"type":"integer","maximum":86400.0,"minimum":60.0,"title":"Expires","description":"过期时间（秒）","default":3600},"method":{"type":"string","title":"Method","description":"HTTP方法","default":"GET"}},"type":"object","required":["file_key"],"title":"PresignedUrlRequest","description":"预签名URL请求模型"},"PresignedUrlResponse":{"properties":{"presigned_url":{"type":"string","title":"Presigned Url","description":"预签名URL"},"file_key":{"type":"string","title":"File Key","description":"文件存储键"},"expires_in":{"type":"integer","title":"Expires In","description":"过期时间（秒）"},"method":{"type":"string","title":"Method","description":"HTTP方法"}},"type":"object","required":["presigned_url","file_key","expires_in","method"],"title":"PresignedUrlResponse","description":"预签名URL响应模型"},"ResponseModel":{"properties":{"success":{"type":"boolean","title":"Success","description":"操作是否成功"},"data":{"anyOf":[{},{"type":"null"}],"title":"Data","description":"响应数据"},"message":{"type":"string","title":"Message","description":"响应消息"},"code":{"type":"integer","title":"Code","description":"状态码","default":200},"timestamp":{"type":"string","title":"Timestamp","description":"时间戳"}},"type":"object","required":["success","message"],"title":"ResponseModel","description":"统一API响应模型"},"SystemMetricsResponse":{"properties":{"system_metrics":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"System Metrics"},"api_metrics":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Api Metrics"},"error_counts":{"additionalProperties":{"type":"integer"},"type":"object","title":"Error Counts"},"time_range":{"additionalProperties":{"type":"string"},"type":"object","title":"Time Range"}},"type":"object","required":["system_metrics","api_metrics","error_counts","time_range"],"title":"SystemMetricsResponse","description":"系统指标响应模型"},"TaskStatusResponse":{"properties":{"task_id":{"type":"string","title":"Task Id","description":"任务ID"},"status":{"type":"string","title":"Status","description":"任务状态"},"media_url":{"type":"string","title":"Media Url","description":"媒体URL"},"media_type":{"type":"string","title":"Media Type","description":"媒体类型"},"created_at":{"type":"string","title":"Created At","description":"创建时间"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At","description":"开始时间"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At","description":"完成时间"},"failed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Failed At","description":"失败时间"},"result":{"anyOf":[{"$ref":"#/components/schemas/AIAnalysisResponse"},{"type":"null"}],"description":"分析结果"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"错误信息"}},"type":"object","required":["task_id","status","media_url","media_type","created_at"],"title":"TaskStatusResponse","description":"任务状态响应模型"},"TokenRefreshRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token","description":"刷新令牌"}},"type":"object","required":["refresh_token"],"title":"TokenRefreshRequest","description":"令牌刷新请求模式"},"TokenRefreshResponse":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"新的访问令牌"},"refresh_token":{"type":"string","title":"Refresh Token","description":"新的刷新令牌"},"token_type":{"type":"string","title":"Token Type","description":"令牌类型","default":"bearer"}},"type":"object","required":["access_token","refresh_token"],"title":"TokenRefreshResponse","description":"令牌刷新响应模式"},"UpdateEventRequest":{"properties":{"event_type":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Event Type","description":"事件类型"},"title":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Title","description":"事件标题"},"description":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Description","description":"事件描述"},"latitude":{"anyOf":[{"type":"number","maximum":90.0,"minimum":-90.0},{"type":"null"}],"title":"Latitude","description":"纬度"},"longitude":{"anyOf":[{"type":"number","maximum":180.0,"minimum":-180.0},{"type":"null"}],"title":"Longitude","description":"经度"},"address":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Address","description":"详细地址"},"priority":{"anyOf":[{"$ref":"#/components/schemas/EventPriority"},{"type":"null"}],"description":"优先级"}},"type":"object","title":"UpdateEventRequest","description":"更新事件请求模型"},"UpdateEventResponse":{"properties":{"event_id":{"type":"string","title":"Event Id","description":"事件ID"},"updated_fields":{"items":{"type":"string"},"type":"array","title":"Updated Fields","description":"更新的字段列表"},"event":{"$ref":"#/components/schemas/EventResponse","description":"更新后的事件信息"},"message":{"type":"string","title":"Message","description":"更新结果消息"}},"type":"object","required":["event_id","updated_fields","event","message"],"title":"UpdateEventResponse","description":"更新事件响应模型"},"UpdateEventStatusRequest":{"properties":{"status":{"$ref":"#/components/schemas/EventStatus","description":"新状态"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description","description":"状态变更描述"}},"type":"object","required":["status"],"title":"UpdateEventStatusRequest","description":"更新事件状态请求模型"},"UploadPresignedUrlRequest":{"properties":{"file_name":{"type":"string","title":"File Name","description":"文件名"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type","description":"文件MIME类型"},"folder":{"type":"string","title":"Folder","description":"存储文件夹","default":"uploads"},"expires":{"type":"integer","maximum":86400.0,"minimum":60.0,"title":"Expires","description":"过期时间（秒）","default":3600}},"type":"object","required":["file_name"],"title":"UploadPresignedUrlRequest","description":"上传预签名URL请求模型"},"UploadPresignedUrlResponse":{"properties":{"upload_url":{"type":"string","title":"Upload Url","description":"上传URL"},"file_key":{"type":"string","title":"File Key","description":"文件存储键"},"expires_in":{"type":"integer","title":"Expires In","description":"过期时间（秒）"},"method":{"type":"string","title":"Method","description":"HTTP方法"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type","description":"内容类型"}},"type":"object","required":["upload_url","file_key","expires_in","method"],"title":"UploadPresignedUrlResponse","description":"上传预签名URL响应模型"},"UserLoginRequest":{"properties":{"phone":{"type":"string","title":"Phone","description":"手机号","example":"13800138000"},"password":{"type":"string","title":"Password","description":"密码","example":"password123"}},"type":"object","required":["phone","password"],"title":"UserLoginRequest","description":"用户登录请求模式"},"UserProfileUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":20,"minLength":2},{"type":"null"}],"title":"Name","description":"用户姓名","example":"李四"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url","description":"头像URL","example":"https://example.com/avatar.jpg"}},"type":"object","title":"UserProfileUpdateRequest","description":"用户资料更新请求模式"},"UserResponse":{"properties":{"id":{"type":"string","title":"Id","description":"用户ID"},"phone":{"type":"string","title":"Phone","description":"手机号"},"name":{"type":"string","title":"Name","description":"用户姓名"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url","description":"头像URL"},"is_active":{"type":"boolean","title":"Is Active","description":"是否激活"},"created_at":{"type":"string","title":"Created At","description":"创建时间"},"updated_at":{"type":"string","title":"Updated At","description":"更新时间"}},"type":"object","required":["id","phone","name","is_active","created_at","updated_at"],"title":"UserResponse","description":"用户信息响应模式"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VideoAnalysisRequest":{"properties":{"video_url":{"type":"string","title":"Video Url","description":"视频URL"},"max_frames":{"anyOf":[{"type":"integer","maximum":10.0,"minimum":1.0},{"type":"null"}],"title":"Max Frames","description":"最大提取帧数","default":5}},"type":"object","required":["video_url"],"title":"VideoAnalysisRequest","description":"视频分析请求模型"},"VideoFrameExtractionRequest":{"properties":{"video_url":{"type":"string","title":"Video Url","description":"视频URL"},"max_frames":{"anyOf":[{"type":"integer","maximum":10.0,"minimum":1.0},{"type":"null"}],"title":"Max Frames","description":"最大提取帧数","default":5}},"type":"object","required":["video_url"],"title":"VideoFrameExtractionRequest","description":"视频关键帧提取请求模型"},"VideoFrameExtractionResponse":{"properties":{"frame_urls":{"items":{"type":"string"},"type":"array","title":"Frame Urls","description":"关键帧URL列表"},"frame_count":{"type":"integer","title":"Frame Count","description":"提取的帧数量"},"video_info":{"additionalProperties":true,"type":"object","title":"Video Info","description":"视频信息"}},"type":"object","required":["frame_urls","frame_count","video_info"],"title":"VideoFrameExtractionResponse","description":"视频关键帧提取响应模型"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}